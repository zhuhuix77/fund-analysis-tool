# 基金回测分析程序

一个功能完整的基金回测分析工具，支持真实数据下载和图形化分析。

## 功能特性

### 📊 数据获取
- **真实基金数据下载**: 从天天基金网获取真实的基金净值数据
- **基金信息查询**: 获取基金基本信息（名称、代码等）
- **历史数据**: 支持自定义时间范围的历史净值数据
- **数据容错**: 当无法获取真实数据时，自动生成模拟数据用于演示

### 🔍 回测分析
- **收益率计算**: 总收益率、年化收益率
- **风险指标**: 年化波动率、最大回撤、夏普比率
- **统计指标**: 胜率、交易天数等
- **投资模拟**: 支持一次性投资和定投策略

### 📈 图形分析
- **净值走势图**: 直观展示基金净值变化
- **累计收益率**: 显示投资收益情况
- **收益率分布**: 日收益率的统计分布
- **回撤分析**: 可视化最大回撤和回撤过程
- **投资组合价值**: 模拟投资的价值变化

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 基本使用

```bash
python fund_backtest.py
```

运行后按提示输入基金代码（如：000001），程序将自动：
1. 下载基金数据
2. 进行回测分析
3. 生成分析报告
4. 显示图形化结果

### 代码示例

```python
from fund_backtest import FundDataDownloader, FundBacktester, FundAnalyzer

# 1. 下载数据
downloader = FundDataDownloader()
fund_data = downloader.get_fund_history('000001', '2023-01-01', '2024-01-01')

# 2. 回测分析
backtester = FundBacktester(fund_data)
metrics = backtester.calculate_metrics()

# 3. 可视化分析
analyzer = FundAnalyzer('000001', fund_data, metrics)
analyzer.plot_comprehensive_analysis()
analyzer.print_analysis_report()
```

## 分析指标说明

### 收益指标
- **总收益率**: 整个投资期间的总收益百分比
- **年化收益率**: 按年计算的平均收益率

### 风险指标
- **年化波动率**: 衡量收益率的波动程度
- **最大回撤**: 从最高点到最低点的最大跌幅
- **夏普比率**: 风险调整后的收益率指标

### 其他指标
- **胜率**: 上涨交易日占总交易日的比例
- **交易天数**: 分析期间的总交易天数

## 投资策略

程序支持两种投资策略模拟：

1. **一次性投资 (Lump Sum)**
   - 在期初一次性投入全部资金
   - 适合对市场时机有判断的投资者

2. **定期定额投资 (DCA)**
   - 每月定期投入固定金额
   - 可以平滑市场波动，降低投资风险

## 数据来源

- **主要数据源**: 天天基金网 (fund.eastmoney.com)
- **备用方案**: 当无法获取真实数据时，使用算法生成的模拟数据
- **数据更新**: 实时获取最新的基金净值数据

## 注意事项

1. **网络连接**: 需要稳定的网络连接来下载基金数据
2. **数据准确性**: 程序尽力获取准确数据，但不保证100%准确
3. **投资建议**: 分析结果仅供参考，不构成投资建议
4. **风险提示**: 投资有风险，入市需谨慎

## 技术架构

```
fund_backtest.py
├── FundDataDownloader    # 数据下载模块
├── FundBacktester       # 回测分析模块
└── FundAnalyzer         # 可视化分析模块
```

## 扩展功能

程序设计具有良好的扩展性，可以轻松添加：
- 更多技术指标
- 不同的投资策略
- 多基金对比分析
- 风险管理功能
- 数据导出功能

## 常见问题

**Q: 无法获取基金数据怎么办？**
A: 程序会自动切换到模拟数据模式，确保功能演示正常进行。

**Q: 支持哪些基金？**
A: 理论上支持所有在天天基金网有数据的公募基金。

**Q: 分析结果准确吗？**
A: 分析方法基于标准的金融计算公式，但结果仅供参考。

## 更新日志

- v1.0.0: 初始版本，包含基本的数据下载、回测分析和图形展示功能