# 基金回测分析程序 - 使用指南

## 🎯 程序概述

这是一个功能完整的基金回测分析工具，能够：
- 📊 下载真实基金数据
- 📈 进行专业回测分析  
- 🎨 生成图形化报告
- 💡 提供投资建议

## 🚀 快速开始

### 1. 环境准备
```bash
# 安装依赖
pip install -r requirements.txt
```

### 2. 运行方式

#### 方式一：交互式运行
```bash
python fund_backtest.py
```
按提示输入基金代码，程序会引导您完成分析。

#### 方式二：演示模式
```bash
python simple_demo.py
```
自动运行完整演示，无需用户输入。

#### 方式三：高级示例
```bash
python example_usage.py
```
展示多种使用场景和自定义分析。

## 📊 功能详解

### 数据下载功能
- **真实数据源**：天天基金网
- **数据类型**：历史净值、基金信息
- **时间范围**：可自定义起止日期
- **容错机制**：网络异常时使用模拟数据

### 回测分析指标

| 指标 | 说明 | 计算方法 |
|------|------|----------|
| 总收益率 | 整个期间的总收益 | (期末净值/期初净值 - 1) × 100% |
| 年化收益率 | 按年计算的平均收益 | ((1+总收益率)^(252/交易天数) - 1) × 100% |
| 年化波动率 | 收益率的年化标准差 | 日收益率标准差 × √252 × 100% |
| 夏普比率 | 风险调整后收益 | (年化收益率 - 无风险利率) / 年化波动率 |
| 最大回撤 | 从高点到低点的最大跌幅 | max((累计净值 - 滚动最高点) / 滚动最高点) |
| 胜率 | 上涨交易日占比 | 上涨天数 / 总交易天数 × 100% |

### 投资策略模拟

#### 一次性投资 (Lump Sum)
- 在期初一次性投入全部资金
- 适合对市场时机有判断的投资者
- 收益完全取决于买入时点

#### 定期定额投资 (DCA)
- 每月定期投入固定金额
- 能够平滑市场波动
- 降低择时风险

### 风险分析工具

#### VaR (Value at Risk)
- **VaR 95%**：95%置信度下的最大可能损失
- **VaR 99%**：99%置信度下的最大可能损失
- 帮助投资者了解极端情况下的风险

#### 回撤分析
- 展示基金净值从高点回落的过程
- 帮助评估基金的风险控制能力

## 🎨 图表说明

### 综合分析图表（2×2布局）

1. **净值走势图**
   - 显示基金净值随时间的变化
   - 直观反映基金表现趋势

2. **累计收益率图**
   - 显示投资收益的累积过程
   - 零线表示盈亏平衡点

3. **收益率分布图**
   - 日收益率的统计分布
   - 显示收益率的集中程度和偏度

4. **回撤分析图**
   - 显示基金的回撤过程
   - 红色区域表示亏损期间

### 投资策略对比图

1. **投资组合价值走势**
   - 显示投资组合价值变化
   - 对比不同策略的表现

2. **关键指标面板**
   - 汇总所有重要指标
   - 便于快速了解基金表现

## 💡 使用技巧

### 基金代码获取
- 访问天天基金网 (fund.eastmoney.com)
- 搜索基金名称获取6位数字代码
- 常见基金代码示例：
  - 000001：华夏成长混合
  - 110022：易方达消费行业
  - 161725：招商中证白酒指数

### 分析期间选择
- **短期分析**：3-6个月，适合了解近期表现
- **中期分析**：1-2年，适合评估基金经理能力
- **长期分析**：3-5年，适合评估长期投资价值

### 指标解读技巧

#### 收益率指标
- 年化收益率 > 10%：表现优秀
- 年化收益率 5-10%：表现良好
- 年化收益率 < 5%：表现一般

#### 风险指标
- 夏普比率 > 1：风险收益比优秀
- 夏普比率 0.5-1：风险收益比良好
- 夏普比率 < 0.5：风险收益比较差

#### 回撤指标
- 最大回撤 < 10%：风险控制优秀
- 最大回撤 10-20%：风险控制良好
- 最大回撤 > 20%：风险较高

## 🔧 自定义分析

### 代码示例
```python
from fund_backtest import FundDataDownloader, FundBacktester, FundAnalyzer

# 1. 下载数据
downloader = FundDataDownloader()
fund_data = downloader.get_fund_history('000001', '2022-01-01', '2023-12-31')

# 2. 回测分析
backtester = FundBacktester(fund_data)
metrics = backtester.calculate_metrics()

# 3. 可视化
analyzer = FundAnalyzer('000001', fund_data, metrics)
analyzer.plot_comprehensive_analysis()
analyzer.print_analysis_report()
```

### 多基金对比
```python
fund_codes = ['000001', '110022', '161725']
results = {}

for code in fund_codes:
    data = downloader.get_fund_history(code, '2023-01-01')
    backtester = FundBacktester(data)
    results[code] = backtester.calculate_metrics()

# 生成对比表格
import pandas as pd
comparison_df = pd.DataFrame(results).T
print(comparison_df)
```

## ⚠️ 注意事项

### 数据准确性
- 程序尽力获取准确数据，但不保证100%准确
- 建议与官方数据进行交叉验证
- 网络异常时会使用模拟数据

### 投资风险提示
- **历史表现不代表未来收益**
- **投资有风险，入市需谨慎**
- **分析结果仅供参考，不构成投资建议**
- **请结合个人风险承受能力做出投资决策**

### 技术限制
- 依赖网络连接获取数据
- 图表显示需要GUI环境
- 某些基金可能无法获取完整数据

## 🆘 常见问题

### Q: 无法获取基金数据怎么办？
A: 程序会自动切换到模拟数据模式，确保功能演示正常进行。

### Q: 图表无法显示怎么办？
A: 确保运行环境支持matplotlib显示，或将图表保存为文件。

### Q: 分析结果是否可信？
A: 分析方法基于标准金融计算公式，但结果仅供参考，不构成投资建议。

### Q: 支持哪些基金？
A: 理论上支持所有在天天基金网有数据的公募基金。

## 📞 技术支持

如遇到问题，请检查：
1. 网络连接是否正常
2. 依赖包是否正确安装
3. 基金代码是否有效
4. Python版本是否兼容（建议3.8+）

---

**免责声明**：本程序仅用于学习和研究目的，分析结果不构成投资建议。投资者应当根据自身情况谨慎决策，自行承担投资风险。